name: localgov
recipe: drupal10
config:
  webroot: .
  php: '8.3'
  database: mariadb:10.6
services:
  database:
    creds:
      user: database
      password: database
      database: database

tooling:
  init-project:
    service: appserver
    description: Initialize LocalGov Drupal project (run this first!)
    cmd:
      - mv README.md LANDO.md
      - composer create-project --stability stable localgovdrupal/localgov-project tmp
      - bash -c "shopt -s dotglob && mv tmp/* tmp/.* . 2>/dev/null || true"
      - rm -rf tmp
      - mv .lando.yml .lando.bootstrap.yml
      - echo "âœ… Project files downloaded."
      - echo "âœ… `.lando.yml` is renamed to `.lando.bootstrap.yml` to avoid conflicts."
      - echo "âœ… README.md is renamed to LANDO.md to avoid conflicts."
      - echo "âœ… These files can be deleted after successful setup."
      - echo "ğŸ“ Lando will automatically use .lando.dist.yml"
